# Tasks
	- DOING Collect more data for Samridha
	  :LOGBOOK:
	  CLOCK: [2024-02-19 Mon 19:39:08]
	  :END:
		- DONE Fix bug with the fault-state being active even when no faults are present
		- TODO Produce some data that causes crashing of drone
- # Bug Fix in SITL Pipeline
	- The fault was being recorded as activated since the trigger did not check to see if there were any active faults to begin with. The issue was identified in {:$/notes/technical/frameworks/px4.simulation.use-case-sensor-fault-injection-simulation:**** fault_manager.py}[fault_manager.py].
	- This was fixed by checking if there were any faults to activate before appending the active flag to `.csv`. Observe relative lines 10-14 below:
	- ```python
	  def _activate_faults(self):
	        """
	          Activates faults based on the current configuration.
	          """
	      self.faults_active = True
	      self.out_string += f"{int(self.get_clock().now().nanoseconds / 1000)},"
	      # Fault must be registered as active iff it has at least one active fault
	      if len(list(self.faulty_sensors.keys())) == 0:
	          self.out_string += "0,"
	      else:
	          self.out_string += "1,"
	  
	      for key in list(self.faulty_sensors.keys()):
	          sensor = self.faulty_sensors[key]
	          for fault_type in list(sensor.keys()):
	              if fault_type == 'activator':
	                  self.param_int_pub.publish(String(data = f"{sensor[fault_type]}/{1}"))
	              else:
	                  random_value = random.random() * (sensor[fault_type]['vals'][1] - sensor[fault_type]['vals'][0]) + sensor[fault_type]['vals'][0]
	                  self.param_float_pub.publish(String(data = f"{sensor[fault_type]['label']}/{random_value}"))
	                  self.out_string += f"{random_value},"
	      self.out_string = self.out_string[:-1] + "\n"
	  ```
	-